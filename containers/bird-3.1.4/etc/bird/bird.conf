# BIRD Internet Routing Daemon configuration file

# This is a basic configuration file, which contains boilerplate options and
# some basic examples. It allows the BIRD daemon to start but will not cause
# anything else to happen.
#
# Please refer to the BIRD User's Guide documentation, which is also available
# online at http://bird.network.cz/ in HTML format, for more information on
# configuring BIRD and adding routing protocols.

# Configure logging
log syslog all;
# log "/var/log/bird.log" { debug, trace, info, remote, warning, error, auth, fatal, bug };

# Set router ID. It is a unique identification of your router, usually one of
# IPv4 addresses of the router. It is recommended to configure it explicitly.
# router id 198.51.100.1;
router id 198.51.100.3;

# Turn on global debugging of all protocols (all messages or just selected classes)
debug protocols all;
# debug protocols { events, states };

# Turn on internal watchdog
# watchdog warning 5 s;
# watchdog timeout 30 s;

# You can define your own constants
# define my_asn = 65000;
# define my_addr = 198.51.100.1;

# Tables master4 and master6 are defined by default
# ipv4 table master4;
# ipv6 table master6;

# Define more tables, e.g. for policy routing or as MRIB
# ipv4 table mrib4;
# ipv6 table mrib6;

# The Device protocol is not a real routing protocol. It does not generate any
# routes and it only serves as a module for getting information about network
# interfaces from the kernel. It is necessary in almost any configuration.
protocol device {
    scan time 10;
}

protocol kernel {
    scan time 10;
    ipv4 {
        import none;
        export filter { # The same as 'where' expression above
                if source ~ [ RTS_STATIC ]
                then reject;
                else accept;
        };
    };
}

protocol kernel {
    scan time 10;
    ipv6 {
        import none;
        export filter { # The same as 'where' expression above
                if source ~ [ RTS_STATIC ]
                then reject;
                else accept;
        };
    };
}

protocol static {
    ipv6;
    route 2001:db8::3/128 via "lo42";
}
protocol static {
    ipv4;
    route 198.51.100.3/32 via "lo42";
}

protocol bgp bngblaster_v4_tx {
    local as 4200000030;
    neighbor 192.0.2.31 as 4200000255;
    ipv4 {
        export filter { # The same as 'where' expression above
                if source ~ [ RTS_STATIC, RTS_BGP ]
                then accept;
                else reject;
        };
        import all;

    };
}

protocol bgp bngblaster_v6_tx {
    local as 4200000030;
    neighbor 2001:db8:100::31 as 4200000255;
    ipv6 {
        export filter { # The same as 'where' expression above
                if source ~ [ RTS_STATIC, RTS_BGP ]
                then accept;
                else reject;
        };
        import all;
    };
}

protocol bgp bngblaster_v4_rx1 {
    local as 4200000030;
    neighbor 192.0.2.33 as 4200000255;
    ipv4 {
        export filter { # The same as 'where' expression above
                if source ~ [ RTS_STATIC, RTS_BGP ]
                then accept;
                else reject;
        };
        import all;
    };
}

protocol bgp bngblaster_v6_rx1 {
    local as 4200000030;
    neighbor 2001:db8:100::33 as 4200000255;
    ipv6 {
        export filter { # The same as 'where' expression above
                if source ~ [ RTS_STATIC, RTS_BGP ]
                then accept;
                else reject;
        };
        import all;
    };
}

protocol bgp bngblaster_v4_rx2 {
    local as 4200000030;
    neighbor 192.0.2.35 as 4200000255;
    direct;
    ipv4 {
        export filter { # The same as 'where' expression above
                if source ~ [ RTS_STATIC, RTS_BGP ]
                then accept;
                else reject;
        };
        import all;
    };
}

protocol bgp bngblaster_v6_rx2 {
    local as 4200000030;
    neighbor 2001:db8:100::35 as 4200000255;
    ipv6 {
        export filter { # The same as 'where' expression above
                if source ~ [ RTS_STATIC, RTS_BGP ]
                then accept;
                else reject;
        };
        import all;
    };
}
